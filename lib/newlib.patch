diff -ruN orig/config.sub new/config.sub
--- orig/config.sub	2023-12-31 20:00:18.000000000 +0300
+++ new/config.sub	2024-01-04 15:28:39.105286679 +0300
@@ -1725,7 +1725,7 @@
 	     | skyos* | haiku* | rdos* | toppers* | drops* | es* \
 	     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \
 	     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \
-	     | nsk* | powerunix* | genode* | zvmoe* | qnx* | emx*)
+	     | nsk* | powerunix* | genode* | zvmoe* | qnx* | emx* | osdev* )
 		;;
 	# This one is extra strict with allowed versions
 	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
diff -ruN orig/newlib/configure.host new/newlib/configure.host
--- orig/newlib/configure.host	2023-12-31 20:00:18.000000000 +0300
+++ new/newlib/configure.host	2024-01-04 15:57:24.974874523 +0300
@@ -439,6 +439,10 @@
 	posix_dir=posix
 	unix_dir=unix
 	;;
+	*-*-osdev*)
+	sys_dir=osdev
+	posix_dir=posix
+	;;
   *-*-tirtos*)
 	sys_dir=tirtos
 	have_crt0="no"
@@ -615,6 +619,9 @@
         # turn off unsupported items in posix directory 
 	newlib_cflags="${newlib_cflags} -D_NO_GETLOGIN -D_NO_GETPWENT -D_NO_GETUT -D_NO_GETPASS -D_NO_SIGSET -D_NO_WORDEXP -D_NO_POPEN -D_NO_POSIX_SPAWN"
 	;;
+	*-*-osdev*)
+  newlib_cflags="${newlib_cflags} -mcpu=cortex-a9 -mhard-float"
+	;;
 # VxWorks supplies its own version of malloc, and the newlib one
 # doesn't work because VxWorks does not have sbrk.
   *-wrs-vxworks*)
diff -ruN orig/newlib/libc/acinclude.m4 new/newlib/libc/acinclude.m4
--- orig/newlib/libc/acinclude.m4	2023-12-31 20:00:18.000000000 +0300
+++ new/newlib/libc/acinclude.m4	2024-01-04 16:00:53.594879116 +0300
@@ -25,6 +25,7 @@
   w65
   xtensa
   z8ksim
+  osdev
 ], [AM_CONDITIONAL([HAVE_LIBC_SYS_]m4_toupper(SYS_DIR)[_DIR], test "${sys_dir}" = SYS_DIR)])
 
 AC_TYPE_LONG_DOUBLE
diff -ruN orig/newlib/libc/include/sys/stat.h new/newlib/libc/include/sys/stat.h
--- orig/newlib/libc/include/sys/stat.h	2023-12-31 20:00:18.000000000 +0300
+++ new/newlib/libc/include/sys/stat.h	2024-01-04 16:29:26.082987728 +0300
@@ -142,7 +142,7 @@
 int	stat (const char *__restrict __path, struct stat *__restrict __sbuf );
 mode_t	umask (mode_t __mask );
 
-#if defined (__SPU__) || defined(__rtems__) || defined(__CYGWIN__)
+#if defined (__SPU__) || defined(__rtems__) || defined(__CYGWIN__) || defined(__OSDEV__)
 int	lstat (const char *__restrict __path, struct stat *__restrict __buf );
 int	mknod (const char *__path, mode_t __mode, dev_t __dev );
 #endif
diff -ruN orig/newlib/libc/posix/posix_spawn.c new/newlib/libc/posix/posix_spawn.c
--- orig/newlib/libc/posix/posix_spawn.c	2023-12-31 20:00:18.000000000 +0300
+++ new/newlib/libc/posix/posix_spawn.c	2024-01-04 16:12:02.024877156 +0300
@@ -258,8 +258,8 @@
 		if (fchdir (fae->fae_dirfd) == -1)
 			return (errno);
 		break;
-	}
 #endif
+	}
 	return (0);
 }
 
diff -ruN orig/newlib/libc/sys/Makefile.inc new/newlib/libc/sys/Makefile.inc
--- orig/newlib/libc/sys/Makefile.inc	2023-12-31 20:00:18.000000000 +0300
+++ new/newlib/libc/sys/Makefile.inc	2024-01-04 15:58:45.924879126 +0300
@@ -70,3 +70,6 @@
 if HAVE_LIBC_SYS_Z8KSIM_DIR
 include %D%/z8ksim/Makefile.inc
 endif
+if HAVE_LIBC_SYS_OSDEV_DIR
+include %D%/osdev/Makefile.inc
+endif
